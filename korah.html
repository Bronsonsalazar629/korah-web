<!DOCTYPE html>
<html lang="en" x-data="app()" :data-theme="theme">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<meta name="description" content="Korah ‚Äî AI study companion with mood-based task recommendations, focus sessions, and AI-generated flashcards, study guides and practice tests."/>
<meta property="og:title" content="Korah ‚Äî Your AI Study Companion"/>
<meta property="og:description" content="Study smarter with mood-based recommendations, focus sessions, and AI-powered study tools."/>
<title>Korah ‚Äî Your AI Study Companion</title>

<!-- FIX #5 PERF: preconnect reduces font load latency -->
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<!-- FIX #5 PERF: display=swap prevents invisible text during load -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>

<!-- FIX #21 FRAMEWORK: Tailwind CDN Play - replaces ~400 lines of custom CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: ['attribute', '[data-theme="dark"]'],
    theme: {
      extend: {
        fontFamily: {
          display: ['"Playfair Display"', 'serif'],
          // FIX #14 CSS: font set once in config, no more repeated font-family declarations
          sans: ['"Plus Jakarta Sans"', 'sans-serif'],
        },
        colors: {
          p2: '#5b21b6', p3: '#7c3aed', p4: '#8b5cf6', p5: '#a78bfa', p6: '#c4b5fd',
          accent: '#f0abfc',
          mood: { green: '#22c55e', yellow: '#eab308', red: '#ef4444' }
        },
        animation: {
          'float':      'floatanim 5s ease-in-out infinite',
          'mascot':     'mfloat 3.5s ease-in-out infinite',
          'pulse-dot':  'pdot 2s infinite',
          'tbounce':    'tbounce 1.4s ease-in-out infinite',
          'fade-up':    'fadeup .8s ease both',
          'ibounce':    'ibounce 1s cubic-bezier(.23,1,.32,1) both',
        },
        keyframes: {
          floatanim: {'0%,100%':{transform:'translateY(0)'},'50%':{transform:'translateY(-10px)'}},
          mfloat: {'0%,100%':{transform:'translateY(0) rotate(0deg)'},'25%':{transform:'translateY(-10px) rotate(2deg)'},'75%':{transform:'translateY(-5px) rotate(-2deg)'}},
          pdot: {'0%,100%':{opacity:'1',transform:'scale(1)'},'50%':{opacity:'.5',transform:'scale(.7)'}},
          tbounce: {'0%,60%,100%':{transform:'translateY(0)'},'30%':{transform:'translateY(-8px)'}},
          fadeup: {from:{opacity:'0',transform:'translateY(28px)'},to:{opacity:'1',transform:'translateY(0)'}},
          ibounce: {'0%':{opacity:'0',transform:'scale(.4) translateY(40px)'},'70%':{transform:'scale(1.1) translateY(-8px)'},'100%':{opacity:'1',transform:'scale(1) translateY(0)'}},
        },
        backdropBlur: { xs: '4px' },
        boxShadow: {
          glow: '0 0 20px rgba(139,92,246,.35)',
          'glow-lg': '0 0 36px rgba(139,92,246,.45)',
          card: '0 25px 60px rgba(0,0,0,.5)',
        },
        transitionTimingFunction: { 'smooth': 'cubic-bezier(.23,1,.32,1)' },
      }
    }
  }
</script>

<!-- FIX #22 FRAMEWORK: Alpine.js replaces ~120 lines of manual querySelector/classList DOM manipulation -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<!-- FIX #8 PERF: Three.js with defer so it doesn't block HTML parsing -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
  /* ‚îÄ‚îÄ Only custom styles that Tailwind can't express ‚îÄ‚îÄ */

  /* FIX #14 CSS: font-family set once here, inherited everywhere */
  body { font-family: 'Plus Jakarta Sans', sans-serif; }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 5px }
  ::-webkit-scrollbar-track { background: transparent }
  ::-webkit-scrollbar-thumb { background: #5b21b6; border-radius: 3px }

  /* Dark/light CSS variables - Tailwind handles classes but vars needed for JS-driven colors */
  [data-theme="dark"] {
    --bg:#06040f; --bg2:#0d0920; --bg3:#120c28;
    --sf:rgba(18,12,40,.7); --sf2:rgba(30,18,60,.6);
    --bd:rgba(139,92,246,.2); --bd2:rgba(139,92,246,.1);
    --tx:#f0eaff; --tx2:#a89dc0; --tx3:#6b5f88;
    --p4:#8b5cf6; --p5:#a78bfa; --ac:#f0abfc;
    --gold:#fbbf24; --grn:#34d399; --red:#f87171;
    --glow:rgba(139,92,246,.35);
    --nb:rgba(6,4,15,.85); --cb:rgba(15,9,35,.82);
    --cu:rgba(91,33,182,.25); --ca:rgba(18,12,40,.9);
    --mg:#22c55e; --my:#eab308; --mr:#ef4444;
  }
  [data-theme="light"] {
    --bg:#faf8ff; --bg2:#f3efff; --bg3:#ebe5ff;
    --sf:rgba(255,255,255,.85); --sf2:rgba(243,239,255,.9);
    --bd:rgba(109,40,217,.18); --bd2:rgba(109,40,217,.1);
    --tx:#1a0a3c; --tx2:#5a4a7a; --tx3:#9080aa;
    --p4:#8b5cf6; --p5:#7c3aed; --ac:#a21caf;
    --gold:#d97706; --grn:#059669; --red:#dc2626;
    --glow:rgba(109,40,217,.15);
    --nb:rgba(250,248,255,.9); --cb:rgba(255,255,255,.92);
    --cu:rgba(109,40,217,.12); --ca:rgba(243,239,255,.95);
    --mg:#16a34a; --my:#ca8a04; --mr:#dc2626;
  }

  /* Semantic color helpers - used throughout */
  .bg-base  { background: var(--bg) }
  .bg-base2 { background: var(--bg2) }
  .bg-base3 { background: var(--bg3) }
  .bg-sf    { background: var(--sf) }
  .bg-sf2   { background: var(--sf2) }
  .bg-card  { background: var(--cb) }
  .bd       { border-color: var(--bd) }
  .bd2      { border-color: var(--bd2) }
  .tx       { color: var(--tx) }
  .tx2      { color: var(--tx2) }
  .tx3      { color: var(--tx3) }
  .tx-p4    { color: var(--p4) }
  .tx-p5    { color: var(--p5) }
  .tx-grn   { color: var(--grn) }
  .tx-gold  { color: var(--gold) }

  /* Gradient text (can't be done in Tailwind config cleanly) */
  .grad-text {
    background: linear-gradient(135deg, var(--p4), var(--ac));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    filter: drop-shadow(0 0 24px var(--glow));
  }
  .grad-bg { background: linear-gradient(135deg, #5b21b6, var(--p4)) }
  .grad-bg-intro { background: linear-gradient(135deg, var(--p4), var(--ac)) }

  /* FIX #4 PERF: will-change only on elements that actually animate */
  .will-anim { will-change: transform }
  #bg-canvas { will-change: transform }

  /* FIX #2 PERF: specific transitions instead of transition:all */
  .t-theme { transition: background-color .4s, border-color .4s, color .4s }
  .t-hover  { transition: transform .3s cubic-bezier(.23,1,.32,1), box-shadow .3s, border-color .3s }
  .t-btn    { transition: transform .2s, box-shadow .2s, filter .2s, background-color .2s }

  /* Backdrop blur (FIX #3 PERF: reduced usage, only critical elements) */
  .glass    { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px) }
  .glass-sm { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px) }

  /* Glow box shadows */
  .shadow-glow    { box-shadow: 0 0 20px var(--glow) }
  .shadow-glow-lg { box-shadow: 0 0 36px var(--glow) }
  .shadow-card    { box-shadow: 0 25px 60px rgba(0,0,0,.5) }

  /* Nav scroll state */
  #navbar { transition: background .4s, box-shadow .4s }
  #navbar.scrolled { background: var(--nb); box-shadow: 0 2px 40px rgba(0,0,0,.18) }
  #navbar.scrolled::after { opacity: 1 }
  #navbar::after { content:''; position:absolute; bottom:0; left:0; right:0; height:1px;
    background:linear-gradient(90deg,transparent,var(--p4),transparent); opacity:0; transition:opacity .4s }

  /* Mascot bubble */
  #mascot-bubble { transition: opacity .35s cubic-bezier(.23,1,.32,1), transform .35s cubic-bezier(.23,1,.32,1) }
  #mascot-bubble.hidden { opacity:0; transform: translateY(10px) scale(.95); pointer-events:none }
  #mascot-bubble.shown  { opacity:1; transform: translateY(0) scale(1); pointer-events:all }

  /* FIX #9 CSS: removed .card-face.back duplicate ‚Äî single declaration now */
  .card-face { backface-visibility: hidden }
  .card-face.back { position:absolute; inset:0; transform: rotateY(180deg) }

  /* Flashcard 3D */
  .fc-inner { transform-style: preserve-3d; transition: transform .6s cubic-bezier(.23,1,.32,1); will-change: transform }
  .fc-card.flipped .fc-inner { transform: rotateY(180deg) }
  .fc-back { position:absolute; inset:0; transform: rotateY(180deg); backface-visibility:hidden }
  .fc-front { backface-visibility: hidden }

  /* Bento tilt glow */
  .tilt-card::after { content:''; position:absolute; inset:0; border-radius:inherit;
    background:radial-gradient(circle at var(--mx,50%) var(--my,50%), var(--glow), transparent 65%);
    opacity:0; transition:opacity .3s; pointer-events:none }
  .tilt-card:hover::after { opacity:1 }

  /* Scroll reveal */
  .reveal { opacity:0; transform:translateY(32px); transition: opacity .8s cubic-bezier(.23,1,.32,1), transform .8s cubic-bezier(.23,1,.32,1) }
  .reveal.visible { opacity:1; transform:none }
  .rd1 { transition-delay:.1s } .rd2 { transition-delay:.2s } .rd3 { transition-delay:.3s } .rd4 { transition-delay:.4s }

  /* Timer digits */
  .timer-display { font-family: 'Playfair Display', serif; letter-spacing: 2px }

  /* FIX #17 CSS: removed dead .timer-ring rule entirely */

  /* Theme toggle pill */
  .theme-toggle::after {
    content:'‚òÄÔ∏è'; position:absolute; top:50%; left:4px;
    transform:translateY(-50%); font-size:14px; line-height:1; transition:transform .3s
  }
  [data-theme="light"] .theme-toggle::after {
    content:'üåô'; transform:translateY(-50%) translateX(18px)
  }

  /* Scroll hint line */
  .scroll-line { animation: sgrow 2s ease-in-out infinite }
  @keyframes sgrow { 0%,100%{opacity:.3;transform:scaleY(.6)} 50%{opacity:1;transform:scaleY(1)} }

  /* Float cards on hero */
  .float-card { animation: floatanim 5s ease-in-out infinite; will-change:transform }
  .float-card:nth-child(2) { animation-delay:1.2s }
  .float-card:nth-child(3) { animation-delay:2.4s }

  /* Pulse ring on mascot */ 50%{box-shadow:0 0 0 8px rgba(52,211,153,0)} }

  /* Mood btn active bg (can't do rgba in Tailwind JIT without safelist) */
  .mood-btn.gm.active { background: rgba(34,197,94,.12) }
  .mood-btn.ym.active { background: rgba(234,179,8,.12) }
  .mood-btn.rm.active { background: rgba(239,68,68,.12) }

  /* Task overdue border */
  .overdue { background:rgba(239,68,68,.25)!important; border-color:rgba(239,68,68,.3)!important }

  /* Active nav pill */
  .nav-link.active { background: #5b21b6; color: #fff !important; box-shadow: 0 0 14px var(--glow) }

  /* Hero mockup window dots */
  .mdot:nth-child(1){background:#ff5f57} .mdot:nth-child(2){background:#febc2e} .mdot:nth-child(3){background:#28c840}

  /* Intro overlay */
  #intro-overlay { transition: opacity .8s cubic-bezier(.23,1,.32,1) }
  #intro-overlay.fade-out { opacity:0; pointer-events:none }

  /* Chat body scroll */
  .chat-body { scrollbar-width: thin }
  .chat-body::-webkit-scrollbar { width:4px }
  .chat-body::-webkit-scrollbar-thumb { background:var(--bd); border-radius:2px }

  /* Intro speech bubble tail */
  #intro-speech::after { content:''; position:absolute; bottom:-10px; left:20px; width:0; height:0;
    border-left:10px solid transparent; border-right:10px solid transparent;
    border-top:10px solid var(--bd) }

  /* ‚îÄ‚îÄ CINEMATIC INTRO ‚îÄ‚îÄ */
  #intro-overlay { background: transparent }
  #intro-overlay.done { pointer-events:none }
  @keyframes intro-particle { 0%{opacity:0;transform:scale(0)} 50%{opacity:1} 100%{opacity:0;transform:scale(1.5) translateY(-60px)} }
  @keyframes intro-sweep-up { from{clip-path:inset(0 0 0% 0)} to{clip-path:inset(0 0 100% 0)} }

</style>
</head>

<!-- FIX #22 FRAMEWORK: Alpine.js x-data replaces manual theme/state JS -->
<body class="bg-base tx" x-cloak>

<canvas id="bg-canvas" class="fixed inset-0 z-0 pointer-events-none opacity-55"></canvas>

<!-- ‚ïê‚ïê‚ïê CINEMATIC INTRO ‚ïê‚ïê‚ïê -->
<div id="intro-overlay" class="fixed inset-0 z-[3000] flex items-center justify-center overflow-hidden pointer-events-none" aria-hidden="true">
  <!-- Particle field only ‚Äî no background, page visible beneath -->
  <canvas id="intro-canvas" class="absolute inset-0 w-full h-full pointer-events-none"></canvas>
  <!-- Glow orb -->
  <div id="intro-orb" class="absolute rounded-full pointer-events-none" style="width:380px;height:380px;background:radial-gradient(circle,rgba(139,92,246,.45) 0%,rgba(91,33,182,.15) 50%,transparent 72%);filter:blur(40px);transform:scale(0);transition:transform 1.1s cubic-bezier(.23,1,.32,1)"></div>
  <!-- Mascot -->
  <div id="intro-mascot" class="relative z-10 flex flex-col items-center gap-0" style="opacity:0;transform:translateY(30px) scale(.7);transition:opacity .7s,transform .9s cubic-bezier(.23,1,.32,1)">
    <img src="data:image/png;base64,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" alt="" class="w-52 h-52 drop-shadow-[0_0_70px_rgba(139,92,246,1)]"/>
    <div id="intro-wordmark" style="opacity:0;transform:translateY(12px);transition:opacity .6s .3s,transform .6s .3s cubic-bezier(.23,1,.32,1)">
      <div class="font-display font-black text-center mt-3" style="font-size:clamp(2.8rem,8vw,5.5rem);line-height:1;background:linear-gradient(135deg,#a78bfa,#f0abfc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 0 32px rgba(139,92,246,.6))">Korah</div>
      <div class="text-center text-sm tracking-[4px] uppercase mt-1.5" style="color:rgba(167,139,250,.7)">AI Study Companion</div>
    </div>
  </div>

</div>

<!-- ‚ïê‚ïê‚ïê NAVBAR ‚ïê‚ïê‚ïê -->
<nav id="navbar" class="fixed top-0 left-0 right-0 h-[70px] z-[1000] flex items-center px-4 md:px-[clamp(16px,4vw,52px)]">
  <a href="#home" class="flex items-center gap-2.5 no-underline shrink-0 z-10">
    <div class="w-10 h-10 rounded-xl grad-bg flex items-center justify-center font-display text-xl font-black text-white shadow-glow relative overflow-hidden t-btn hover:rotate-[-5deg] hover:scale-[1.08] hover:shadow-glow-lg">
      <span class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"></span>K
    </div>
    <div class="flex flex-col leading-tight">
      <span class="font-display text-[19px] font-bold tx">Korah</span>
      <span class="text-[9px] font-semibold tracking-[2.5px] uppercase tx-p4">Beta ¬∑ Study AI</span>
    </div>
  </a>

  <div class="nav-links absolute left-1/2 -translate-x-1/2 hidden md:flex items-center gap-1 bg-sf2 border bd2 rounded-full px-2 py-1.5 glass-sm t-theme">
    <a href="#home"        class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">Home</a>
    <a href="#how"         class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">How it Works</a>
    <a href="#features"    class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">Features</a>
    <a href="#study-tools" class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">Study Tools</a>
    <a href="#chat"        class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">Korah AI</a>
    <a href="#download"    class="nav-link text-[13.5px] font-medium tx2 px-4 py-1.5 rounded-full t-btn hover:tx hover:bg-[var(--bd)]">Download</a>
  </div>

  <div class="ml-auto flex items-center gap-2.5 z-10">
    <!-- FIX #6 MAINT: Alpine replaces manual theme JS -->
    <button @click="theme = theme==='dark' ? 'light' : 'dark'" class="theme-toggle w-11 h-[26px] rounded-full bg-sf2 border bd cursor-pointer relative t-theme" aria-label="Toggle theme"></button>
    <button class="hidden md:block text-[13px] font-semibold px-5 py-2.5 rounded-full cursor-pointer border bd tx2 bg-transparent t-btn hover:tx-p4 hover:border-p4 hover:bg-[var(--bd2)]">Log in</button>
    <button class="text-[13px] font-semibold px-5 py-2.5 rounded-full cursor-pointer border-none text-white grad-bg shadow-glow t-btn hover:-translate-y-px hover:shadow-glow-lg">Get Beta Access</button>
    <!-- FIX #6 MAINT: Alpine x-bind:class and @click replace manual JS hamburger -->
    <button @click="menuOpen=!menuOpen" :class="menuOpen && 'open'" class="hamburger md:hidden flex flex-col gap-1.5 bg-transparent border-none cursor-pointer p-1.5" aria-label="Menu">
      <span class="block w-5.5 h-0.5 bg-p4 rounded transition-transform duration-300"></span>
      <span class="block w-5.5 h-0.5 bg-p4 rounded transition-all duration-300"></span>
      <span class="block w-5.5 h-0.5 bg-p4 rounded transition-transform duration-300"></span>
    </button>
  </div>
</nav>

<!-- Mobile menu ‚Äî Alpine x-show replaces classList toggle -->
<div class="fixed top-[70px] left-0 right-0 z-[999] bg-[var(--nb)] glass border-b bd px-6 pb-7 pt-5 t-theme"
     x-show="menuOpen" x-transition:enter="transition ease-smooth duration-350"
     x-transition:enter-start="opacity-0 -translate-y-[110%]" x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-smooth duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
  <template x-for="link in navLinks" :key="link.id">
    <a :href="'#'+link.id" @click="menuOpen=false" class="block text-base font-medium tx2 no-underline py-3.5 px-2 border-b bd2 t-btn hover:tx-p4" x-text="link.label"></a>
  </template>
  <div class="flex gap-2.5 mt-5">
    <button class="flex-1 py-3 text-[13px] font-semibold rounded-full border bd tx2 bg-transparent cursor-pointer">Log in</button>
    <button class="flex-1 py-3 text-[13px] font-semibold rounded-full border-none text-white grad-bg cursor-pointer">Get Access</button>
  </div>
</div>

<div class="relative z-10">

<!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
<section id="home" class="min-h-screen flex flex-col items-center justify-center pt-[calc(70px+60px)] pb-24 px-5 md:px-[clamp(20px,6vw,80px)] relative overflow-hidden">
  <!-- Mascot background ‚Äî large, centered, behind all content -->
  <img src="" alt="" aria-hidden="true" class="absolute left-1/2 top-1/2 pointer-events-none select-none" style="transform:translate(-50%,-52%);width:min(680px,90vw);height:auto;opacity:.09;filter:blur(1px) drop-shadow(0 0 80px rgba(139,92,246,.6));z-index:0;animation:floatanim 7s ease-in-out infinite"/>
  <div class="relative z-10 inline-flex items-center gap-2 bg-sf2 border bd px-4 py-2 rounded-full mb-7 text-[12.5px] font-semibold tx-p5 animate-fade-up t-theme">
    <span class="w-2 h-2 rounded-full bg-[var(--grn)] shadow-[0_0_8px_var(--grn)] animate-pulse-dot"></span>
    Now in Early Beta ‚Äî Free to Try
  </div>
  <h1 class="relative z-10 font-display text-[clamp(3rem,8vw,7.5rem)] font-black leading-none text-center tx animate-fade-up opacity-0" style="animation-delay:.1s;animation-fill-mode:both">
    Study Smarter,<br/><span class="grad-text">Not Harder.</span>
  </h1>
  <p class="relative z-10 text-[clamp(15px,2vw,18px)] leading-relaxed tx2 max-w-xl text-center mt-6 mb-11 animate-fade-up opacity-0" style="animation-delay:.2s;animation-fill-mode:both">
    Korah is your personal AI study companion. It knows when you're tired, what's overdue, and exactly what you need to do next ‚Äî so you never have to guess.
  </p>
  <div class="relative z-10 flex flex-wrap gap-3.5 justify-center animate-fade-up opacity-0" style="animation-delay:.3s;animation-fill-mode:both">
    <button onclick="document.getElementById('chat').scrollIntoView({behavior:'smooth'})" class="grad-bg text-white font-bold text-base px-8 py-3.5 rounded-full border-none cursor-pointer shadow-glow t-btn hover:-translate-y-0.5 hover:brightness-110">‚ú® Try Korah AI Free</button>
    <button onclick="document.getElementById('download').scrollIntoView({behavior:'smooth'})" class="bg-transparent tx border-[1.5px] bd font-bold text-base px-8 py-3.5 rounded-full cursor-pointer t-btn hover:tx-p4 hover:border-p4 hover:bg-[var(--bd2)]">‚¨á Download Beta</button>
  </div>

  <div class="relative z-10 mt-[70px] w-full max-w-[780px] animate-fade-up opacity-0" style="animation-delay:.4s;animation-fill-mode:both">
    <div class="bg-card border bd rounded-3xl p-7 shadow-card glass relative overflow-hidden t-theme">
      <div class="absolute -top-[60px] -right-[60px] w-[200px] h-[200px] rounded-full bg-radial-glow pointer-events-none" style="background:radial-gradient(circle,var(--glow),transparent 70%)"></div>
      <div class="flex items-center gap-2 mb-5">
        <div class="mdot w-2.5 h-2.5 rounded-full"></div><div class="mdot w-2.5 h-2.5 rounded-full"></div><div class="mdot w-2.5 h-2.5 rounded-full"></div>
        <div class="flex-1 text-center text-[12px] font-medium tx3 bg-sf2 border bd2 px-4 py-1 rounded-lg mx-auto max-w-[200px]">Korah AI Chat</div>
      </div>
      <div class="flex flex-col gap-3" id="heroChatStream">
        <div class="self-end max-w-[80%] px-4 py-3 rounded-[18px_18px_4px_18px] text-sm leading-relaxed bg-[var(--cu)] border bd tx">I have 3 assignments and a test tomorrow. I'm kinda burnt out.</div>
        <div class="self-start max-w-[80%] px-4 py-3 rounded-[18px_18px_18px_4px] text-sm leading-relaxed bg-[var(--ca)] border bd tx">
          <div class="flex items-center gap-1.5 text-[11px] font-bold tracking-[1px] tx-p4 uppercase mb-1.5"><span class="w-1.5 h-1.5 rounded-full bg-p4 animate-pulse-dot"></span>Korah AI</div>
          Got it ‚Äî sounds like a yellow focus day üü°. Let's not overwhelm you. I'd suggest tackling your <strong>one easy task</strong> now to build momentum, and I'll remind you about the test in the morning. Want me to generate a quick study guide?
        </div>
        <div class="self-end max-w-[80%] px-4 py-3 rounded-[18px_18px_4px_18px] text-sm leading-relaxed bg-[var(--cu)] border bd tx">Yes, make a study guide for Chapter 5 ‚Äî Photosynthesis.</div>
        <div id="hero-typing" class="self-start flex gap-1 items-center px-4 py-3.5 bg-[var(--ca)] border bd rounded-[18px_18px_18px_4px]">
          <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce" style="animation-delay:.2s"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce" style="animation-delay:.4s"></span>
        </div>
      </div>
    </div>
    <div class="hero-floats absolute inset-0 pointer-events-none hidden lg:block">
      <div class="float-card absolute bg-card border bd rounded-2xl px-4 py-3.5 glass shadow-card flex items-center gap-3 text-[13px] font-medium tx whitespace-nowrap t-theme" style="top:-20px;left:-110px">
        <span class="text-2xl">üî•</span><div><div class="text-[11px] tx3">Study Streak</div><div class="text-base font-bold tx-p5">14 days</div></div>
      </div>
      <div class="float-card absolute bg-card border bd rounded-2xl px-4 py-3.5 glass shadow-card flex items-center gap-3 text-[13px] font-medium tx whitespace-nowrap t-theme" style="bottom:20px;right:-120px;animation-delay:1.2s">
        <span class="text-2xl">‚ö†Ô∏è</span><div><div class="text-[11px] tx3">Overdue Tasks</div><div class="text-base font-bold" style="color:var(--mr)">2 tasks</div></div>
      </div>
      <div class="float-card absolute bg-card border bd rounded-2xl px-4 py-3.5 glass shadow-card flex items-center gap-3 text-[13px] font-medium tx whitespace-nowrap t-theme" style="top:110px;right:-100px;animation-delay:2.4s">
        <span class="text-2xl">üéØ</span><div><div class="text-[11px] tx3">Focus Sessions</div><div class="text-base font-bold tx-p5">47 total</div></div>
      </div>
    </div>
  </div>
  <div class="absolute bottom-9 left-1/2 -translate-x-1/2 flex flex-col items-center gap-1.5 text-[11px] tracking-[2px] tx3 uppercase animate-fade-up opacity-0" style="animation-delay:.8s;animation-fill-mode:both">
    <div class="w-px h-10 bg-gradient-to-b from-p4 to-transparent scroll-line"></div>Scroll
  </div>
</section>

<!-- ‚îÄ‚îÄ HOW IT WORKS ‚îÄ‚îÄ -->
<section id="how" class="flex flex-col items-center py-24 px-5 md:px-[clamp(20px,6vw,80px)] bg-base2 t-theme">
  <div class="inline-flex items-center gap-2 bg-sf2 border bd px-4 py-1.5 rounded-full text-[11px] font-bold tracking-[2.5px] uppercase tx-p4 mb-5 reveal t-theme"><span class="dot w-1.5 h-1.5 rounded-full bg-p4"></span>Simple Process</div>
  <h2 class="font-display text-[clamp(2rem,5vw,3.6rem)] font-bold text-center tx leading-tight mb-3.5 reveal">Learn the Korah Way</h2>
  <p class="text-base leading-relaxed tx2 text-center max-w-lg mx-auto mb-14 reveal">From scattered to sorted in four steps. No chaos, no confusion.</p>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-[1020px]">
    <div class="tilt-card step-card bg-card border bd2 rounded-3xl p-9 relative overflow-hidden t-hover t-theme reveal rd1">
      <div class="font-display text-6xl font-black leading-none mb-5" style="color:var(--bd)">01</div>
      <span class="text-3xl mb-4 block">üòå</span>
      <h3 class="text-lg font-bold mb-2.5 tx">Check Your Mood</h3>
      <p class="text-sm tx2 leading-[1.7]">Tell Korah how you're feeling ‚Äî green, yellow, or red. It adapts every recommendation to your actual energy level that day.</p>
    </div>
    <div class="tilt-card step-card bg-card border bd2 rounded-3xl p-9 relative overflow-hidden t-hover t-theme reveal rd2">
      <div class="font-display text-6xl font-black leading-none mb-5" style="color:var(--bd)">02</div>
      <span class="text-3xl mb-4 block">üìã</span>
      <h3 class="text-lg font-bold mb-2.5 tx">Manage Your Tasks</h3>
      <p class="text-sm tx2 leading-[1.7]">Create tasks with easy, medium, or hard difficulty and pick due dates. Korah surfaces what's overdue and what to tackle first.</p>
    </div>
    <div class="tilt-card step-card bg-card border bd2 rounded-3xl p-9 relative overflow-hidden t-hover t-theme reveal rd3">
      <div class="font-display text-6xl font-black leading-none mb-5" style="color:var(--bd)">03</div>
      <span class="text-3xl mb-4 block">‚è±Ô∏è</span>
      <h3 class="text-lg font-bold mb-2.5 tx">Focus Session</h3>
      <p class="text-sm tx2 leading-[1.7]">Pick any timer length and lock in. No distractions, just deep work. Korah tracks your sessions and celebrates consistency.</p>
    </div>
    <div class="tilt-card step-card bg-card border bd2 rounded-3xl p-9 relative overflow-hidden t-hover t-theme reveal rd4">
      <div class="font-display text-6xl font-black leading-none mb-5" style="color:var(--bd)">04</div>
      <span class="text-3xl mb-4 block">üß†</span>
      <h3 class="text-lg font-bold mb-2.5 tx">Study with AI</h3>
      <p class="text-sm tx2 leading-[1.7]">Generate flashcards, study guides, and practice tests ‚Äî manually or with one AI prompt. Then quiz yourself until it clicks.</p>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ FEATURES BENTO ‚îÄ‚îÄ -->
<section id="features" class="flex flex-col items-center py-24 px-5 md:px-[clamp(20px,6vw,80px)] bg-base t-theme">
  <div class="inline-flex items-center gap-2 bg-sf2 border bd px-4 py-1.5 rounded-full text-[11px] font-bold tracking-[2.5px] uppercase tx-p4 mb-5 reveal t-theme"><span class="dot w-1.5 h-1.5 rounded-full bg-p4"></span>Features</div>
  <h2 class="font-display text-[clamp(2rem,5vw,3.6rem)] font-bold text-center tx leading-tight mb-3.5 reveal">Built Around How You Actually Feel</h2>
  <p class="text-base leading-relaxed tx2 text-center max-w-lg mx-auto mb-14 reveal">Korah doesn't just assign you tasks ‚Äî it reads your energy and builds your day around it.</p>

  <div class="grid grid-cols-12 gap-4 w-full max-w-[1060px]">

    <!-- Mood ‚Äî wide -->
    <div class="tilt-card col-span-12 md:col-span-8 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">üé®</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Mood-Based Recommendations</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Three focus colors ‚Äî green, yellow, red ‚Äî tell Korah how much you can handle today. It filters and ranks your tasks accordingly.</p>
      <div class="bg-sf2 border bd2 rounded-2xl p-4 t-theme">
        <div class="text-xs tx3 mb-2.5">How are you feeling today?</div>
        <div class="flex gap-2.5" x-data="moodWidget()">
          <button @click="select('gm')" :class="active==='gm' && 'active'" class="mood-btn gm flex-1 p-3 rounded-xl border-2 cursor-pointer text-[13px] font-semibold bg-sf2 flex flex-col items-center gap-1 t-btn hover:-translate-y-0.5" style="border-color:var(--mg);color:var(--mg)">
            <span class="text-xl">üü¢</span><span>Full Focus</span>
          </button>
          <button @click="select('ym')" :class="active==='ym' && 'active'" class="mood-btn ym flex-1 p-3 rounded-xl border-2 cursor-pointer text-[13px] font-semibold bg-sf2 flex flex-col items-center gap-1 t-btn hover:-translate-y-0.5" style="border-color:var(--my);color:var(--my)">
            <span class="text-xl">üü°</span><span>Moderate</span>
          </button>
          <button @click="select('rm')" :class="active==='rm' && 'active'" class="mood-btn rm flex-1 p-3 rounded-xl border-2 cursor-pointer text-[13px] font-semibold bg-sf2 flex flex-col items-center gap-1 t-btn hover:-translate-y-0.5" style="border-color:var(--mr);color:var(--mr)">
            <span class="text-xl">üî¥</span><span>Low Energy</span>
          </button>
        </div>
        <div class="mt-3.5 text-[13px] font-semibold" :style="{color: moodColor}" x-text="moodMsg"></div>
      </div>
    </div>

    <!-- Streaks ‚Äî tall -->
    <div class="tilt-card col-span-12 md:col-span-4 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal rd1">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">üî•</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Daily Streaks</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Study every day, no matter how little. Korah rewards consistency and builds your habits.</p>
      <div class="bg-sf2 border bd2 rounded-2xl p-4 t-theme mb-3">
        <div class="text-xs tx3 mb-2">This week</div>
        <div class="flex gap-1.5" id="streakRow"></div>
        <div class="text-xs tx-gold mt-2.5 font-semibold">üî• 14-day streak!</div>
      </div>
    </div>

    <!-- Tasks -->
    <div class="tilt-card col-span-12 md:col-span-8 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal rd2">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">üìã</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Smart Task Manager</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Create tasks, pick difficulty, set a due date, and let Korah handle the rest ‚Äî prioritization, overdue alerts, and daily suggestions included.</p>
      <div class="bg-sf2 border bd2 rounded-2xl p-4 t-theme">
        <div class="flex items-center gap-2.5 px-3 py-2.5 rounded-xl mb-2 bg-sf border bd2 t-theme">
          <div class="w-2.5 h-2.5 rounded-full flex-shrink-0" style="background:var(--mg)"></div>
          <span class="flex-1 text-[13px] tx">Review Chapter 3 notes</span>
          <span class="text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-[1px] bg-[rgba(34,197,94,.18)] text-[#22c55e]">Easy</span>
        </div>
        <div class="flex items-center gap-2.5 px-3 py-2.5 rounded-xl mb-2 bg-sf border bd2 t-theme">
          <div class="w-2.5 h-2.5 rounded-full flex-shrink-0" style="background:var(--my)"></div>
          <span class="flex-1 text-[13px] tx">Write essay outline ‚Äî History</span>
          <span class="text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-[1px] bg-[rgba(234,179,8,.18)] text-[#eab308]">Medium</span>
        </div>
        <div class="flex items-center gap-2.5 px-3 py-2.5 rounded-xl mb-2 overdue border t-theme">
          <div class="w-2.5 h-2.5 rounded-full flex-shrink-0" style="background:var(--mr)"></div>
          <span class="flex-1 text-[13px] tx">Submit Biology lab report</span>
          <span class="text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-[1px] bg-[rgba(239,68,68,.18)] text-[#ef4444]">Overdue ‚ö†Ô∏è</span>
        </div>
        <div class="flex items-center gap-2.5 px-3 py-2.5 rounded-xl bg-sf border bd2 t-theme">
          <div class="w-2.5 h-2.5 rounded-full flex-shrink-0" style="background:var(--mr)"></div>
          <span class="flex-1 text-[13px] tx">Calculus problem set ‚Äî Unit 5</span>
          <span class="text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-[1px] bg-[rgba(239,68,68,.18)] text-[#ef4444]">Hard</span>
        </div>
      </div>
    </div>

    <!-- Focus Timer -->
    <div class="tilt-card col-span-12 md:col-span-6 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal" x-data="timer()">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">‚è±Ô∏è</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Custom Focus Sessions</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Pick any duration. Korah locks you in and tracks every session.</p>
      <div class="bg-sf2 border bd2 rounded-2xl p-4 text-center t-theme">
        <div class="text-xs tx3 mb-3">Current session</div>
        <!-- FIX #22 FRAMEWORK: Alpine replaces all manual timer JS -->
        <div class="timer-display text-5xl font-black tx" x-text="display"></div>
        <div class="flex justify-center gap-2 mt-3.5 flex-wrap">
          <template x-for="m in [10,25,45,90]" :key="m">
            <button @click="setMin(m)" :class="curMin===m ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2 bd'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border cursor-pointer t-btn" x-text="m+' min'"></button>
          </template>
        </div>
        <div class="flex justify-center gap-2.5 mt-3">
          <button @click="toggle()" class="text-[13px] font-semibold px-5 py-2 rounded-full border-none text-white grad-bg cursor-pointer shadow-glow t-btn" x-text="running ? '‚è∏ Pause' : '‚ñ∂ Start'"></button>
          <button @click="reset()" class="text-[13px] font-semibold px-5 py-2 rounded-full border bd tx2 bg-transparent cursor-pointer t-btn">‚Ü∫ Reset</button>
        </div>
      </div>
    </div>


        <!-- Korah AI -->
    <div class="tilt-card col-span-12 md:col-span-8 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">ü§ñ</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Korah AI Chat</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Ask anything, any time. Korah explains topics at your level, adapts to your mood, warns you about overdue tasks, and never judges.</p>
      <div class="bg-sf2 border bd2 rounded-2xl p-4 t-theme">
        <div class="text-[13px] tx mb-2">"I'm really tired today. What should I study right now?"</div>
        <div class="text-xs tx-p5 mt-2">‚Üí üü° Low energy mode ‚Äî Korah picks your 2 easiest tasks and skips the hard ones until tomorrow.</div>
      </div>
    </div>

    <!-- Flashcard preview -->
    <div class="tilt-card col-span-12 md:col-span-4 bg-card border bd2 rounded-3xl p-8 overflow-hidden relative t-hover t-theme reveal rd1">
      <div class="w-13 h-13 rounded-2xl grad-bg grid place-items-center text-2xl mb-5 shadow-glow">üÉè</div>
      <h3 class="text-[19px] font-bold mb-2.5 tx">Flashcards</h3>
      <p class="text-sm tx2 leading-[1.7] mb-4">Manual or AI-generated. Click to flip.</p>
      <div class="perspective-[800px] cursor-pointer" onclick="this.querySelector('.flashcard').classList.toggle('flipped')">
        <div class="flashcard relative" style="min-height:110px;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.23,1,.32,1)">
          <div class="card-face front bg-sf2 border bd rounded-2xl p-5 flex flex-col justify-center">
            <div class="text-[10px] font-bold tracking-[2px] tx-p4 uppercase mb-2">Question</div>
            <div class="text-sm tx leading-relaxed">What is the powerhouse of the cell?</div>
          </div>
          <div class="card-face back bg-sf2 border bd rounded-2xl p-5 flex flex-col justify-center">
            <div class="text-[10px] font-bold tracking-[2px] tx-p4 uppercase mb-2">Answer</div>
            <div class="text-sm tx leading-relaxed">The <strong>mitochondria</strong> ‚Äî produces ATP through cellular respiration.</div>
          </div>
        </div>
        <div class="text-[11px] tx3 text-center mt-2">üëÜ Click to flip</div>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ STUDY TOOLS ‚îÄ‚îÄ -->
<section id="study-tools" class="flex flex-col items-center py-24 px-5 md:px-[clamp(20px,6vw,80px)] bg-base3 t-theme" x-data="studyTools()">
  <div class="inline-flex items-center gap-2 bg-sf2 border bd px-4 py-1.5 rounded-full text-[11px] font-bold tracking-[2.5px] uppercase tx-p4 mb-5 reveal t-theme"><span class="dot w-1.5 h-1.5 rounded-full bg-p4"></span>Study Tools</div>
  <h2 class="font-display text-[clamp(2rem,5vw,3.6rem)] font-bold text-center tx leading-tight mb-3.5 reveal">Flashcards, Study Guides &amp; Practice Tests</h2>
  <p class="text-base leading-relaxed tx2 text-center max-w-lg mx-auto mb-9 reveal">Create them manually, or let Korah AI generate them in seconds.</p>

  <!-- FIX #22 FRAMEWORK: Alpine handles tab switching with zero JS boilerplate -->
  <div class="flex gap-1.5 bg-sf2 border bd2 rounded-full p-1.5 mb-9 flex-wrap justify-center reveal">
    <template x-for="tab in tabs" :key="tab.id">
      <button @click="activeTab=tab.id" :class="activeTab===tab.id ? 'grad-bg text-white shadow-glow' : 'bg-transparent tx2 hover:bg-[var(--bd)] hover:tx-p4'"
              class="text-[13.5px] font-semibold px-5 py-2.5 rounded-full border-none cursor-pointer t-btn whitespace-nowrap" x-text="tab.label"></button>
    </template>
  </div>

  <!-- FLASHCARDS TAB -->
  <div class="w-full max-w-[860px]" x-show="activeTab==='flashcards'" x-transition:enter="animate-fade-up">
    <div class="bg-card border bd rounded-3xl p-7 t-theme">
      <div class="flex items-center justify-between mb-5">
        <h3 class="text-lg font-bold tx">Flashcard Deck ‚Äî Photosynthesis</h3>
        <div class="flex gap-1.5">
          <button @click="fcMode='manual'" :class="fcMode==='manual' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">My Deck</button>
          <button @click="fcMode='ai'" :class="fcMode==='ai' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">‚ú® AI Generate</button>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3.5" id="fcGrid" x-show="fcMode==='manual'">
        <template x-for="(card,i) in sampleCards" :key="i">
          <div class="bg-sf2 border bd2 rounded-2xl p-4.5 cursor-pointer t-btn hover:-translate-y-1 hover:border-p4 perspective-[600px]" @click="card.flipped=!card.flipped">
            <div class="fc-inner relative" style="min-height:80px" :style="card.flipped ? 'transform:rotateY(180deg)' : ''">
              <div class="fc-front"><div class="text-[10px] tx3 mb-1.5">tap to flip</div><div class="text-[13px] font-semibold tx" x-text="card.q"></div></div>
              <div class="fc-back p-0"><div class="text-[13px] tx-p5" x-html="card.a"></div></div>
            </div>
          </div>
        </template>
      </div>
      <div class="bg-sf2 border bd2 rounded-2xl p-5 mt-4" x-show="fcMode==='ai'">
        <div class="text-[13px] font-semibold tx mb-2.5">‚ú® AI Flashcard Generator</div>
        <textarea x-model="flashTopic" class="w-full bg-sf border bd rounded-xl px-4 py-3 font-sans text-sm tx resize-y outline-none min-h-[80px] focus:border-p4 t-btn placeholder:tx3" placeholder="Type a topic or paste notes (e.g. 'Newton's Laws of Motion')..."></textarea>
        <div class="flex gap-2.5 mt-2.5 items-center flex-wrap">
          <select x-model="flashCount" class="bg-sf border bd rounded-xl px-3.5 py-2 font-sans text-[13px] tx outline-none cursor-pointer t-btn">
            <option value="4">4 cards</option><option value="6">6 cards</option><option value="8">8 cards</option><option value="10">10 cards</option>
          </select>
          <button @click="genFlashcards()" :disabled="loadingFC" class="text-[13px] font-semibold px-5 py-2 rounded-full border-none text-white grad-bg cursor-pointer shadow-glow t-btn disabled:opacity-50">
            <span x-text="loadingFC ? 'Generating‚Ä¶' : 'Generate Flashcards'"></span>
          </button>
          <span class="text-[13px] tx3" x-text="fcStatus"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- STUDY GUIDE TAB -->
  <div class="w-full max-w-[860px]" x-show="activeTab==='studyguide'" x-transition:enter="animate-fade-up">
    <div class="bg-card border bd rounded-3xl p-7 t-theme">
      <div class="flex items-center justify-between mb-5">
        <h3 class="text-lg font-bold tx">Study Guide</h3>
        <div class="flex gap-1.5">
          <button @click="sgMode='manual'" :class="sgMode==='manual' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">Manual</button>
          <button @click="sgMode='ai'" :class="sgMode==='ai' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">‚ú® AI Generate</button>
        </div>
      </div>
      <div x-show="sgMode==='manual'" class="bg-sf2 border bd2 rounded-2xl p-6 leading-[1.8]">
        <div class="mb-4"><h4 class="text-[15px] font-bold tx-p5 mb-2">üìå Topic: Cell Biology ‚Äî Mitosis</h4><p class="text-sm tx2">Mitosis is cell division producing two genetically identical daughter cells for growth, repair and asexual reproduction.</p></div>
        <div class="mb-4"><h4 class="text-[15px] font-bold tx-p5 mb-2">üîë Key Stages (PMAT)</h4><ul class="pl-4 text-sm tx2 list-disc"><li class="mb-1"><strong>Prophase</strong> ‚Äî Chromosomes condense, spindle forms</li><li class="mb-1"><strong>Metaphase</strong> ‚Äî Chromosomes align at cell equator</li><li class="mb-1"><strong>Anaphase</strong> ‚Äî Chromatids pulled to opposite poles</li><li><strong>Telophase</strong> ‚Äî Nuclear envelopes reform, cell divides</li></ul></div>
        <div class="mb-4"><h4 class="text-[15px] font-bold tx-p5 mb-2">üí° Remember</h4><p class="text-sm tx2">Mnemonic: <strong>PMAT</strong> ‚Äî "People Meet And Talk"</p></div>
        <div><h4 class="text-[15px] font-bold tx-p5 mb-2">‚ö†Ô∏è Common Mistakes</h4><ul class="pl-4 text-sm tx2 list-disc"><li class="mb-1">Confusing mitosis (growth) with meiosis (reproduction)</li><li>Forgetting cytokinesis follows telophase</li></ul></div>
      </div>
      <div x-show="sgMode==='ai'">
        <div class="bg-sf2 border bd2 rounded-2xl p-5 t-theme">
          <div class="text-[13px] font-semibold tx mb-2.5">‚ú® AI Study Guide Generator</div>
          <textarea x-model="guideTopic" class="w-full bg-sf border bd rounded-xl px-4 py-3 font-sans text-sm tx resize-y outline-none min-h-[80px] focus:border-p4 t-btn placeholder:tx3" placeholder="Enter a topic (e.g. 'World War I causes and effects')..."></textarea>
          <div class="flex gap-2.5 mt-2.5 items-center flex-wrap">
            <select x-model="guideDepth" class="bg-sf border bd rounded-xl px-3.5 py-2 font-sans text-[13px] tx outline-none cursor-pointer">
              <option value="brief">Brief overview</option><option value="detailed" selected>Detailed guide</option><option value="exam">Exam-focused</option>
            </select>
            <button @click="genGuide()" :disabled="loadingSG" class="text-[13px] font-semibold px-5 py-2 rounded-full border-none text-white grad-bg cursor-pointer shadow-glow t-btn disabled:opacity-50">
              <span x-text="loadingSG ? 'Generating‚Ä¶' : 'Generate Guide'"></span>
            </button>
            <span class="text-[13px] tx3" x-text="sgStatus"></span>
          </div>
        </div>
        <div x-show="guideHTML" class="bg-sf2 border bd2 rounded-2xl p-6 mt-4 leading-[1.8] text-sm tx2" x-html="guideHTML"></div>
      </div>
    </div>
  </div>

  <!-- PRACTICE TEST TAB -->
  <div class="w-full max-w-[860px]" x-show="activeTab==='practicetest'" x-transition:enter="animate-fade-up">
    <div class="bg-card border bd rounded-3xl p-7 t-theme">
      <div class="flex items-center justify-between mb-5">
        <h3 class="text-lg font-bold tx">Practice Test</h3>
        <div class="flex gap-1.5">
          <button @click="ptMode='sample'" :class="ptMode==='sample' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">Sample Test</button>
          <button @click="ptMode='ai'" :class="ptMode==='ai' ? 'bg-p4 text-white border-p4' : 'bg-transparent tx2'" class="text-xs font-semibold px-3.5 py-1.5 rounded-full border bd cursor-pointer t-btn">‚ú® AI Generate</button>
        </div>
      </div>
      <div x-show="ptMode==='sample'">
        <div class="text-[13px] tx2 mb-4">Topic: <strong>Photosynthesis</strong> ¬∑ Click an answer to check it.</div>
        <template x-for="(q,qi) in sampleTest" :key="qi">
          <div class="bg-sf2 border bd2 rounded-2xl p-4.5 mb-3">
            <div class="text-sm font-semibold tx mb-3" x-text="(qi+1)+'. '+q.q"></div>
            <div class="flex flex-col gap-2">
              <template x-for="(opt,oi) in q.opts" :key="oi">
                <div @click="answerQ(q,oi)"
                     :class="q.answered!=null ? (oi===q.c ? 'border-[var(--grn)] bg-[rgba(34,197,94,.1)] text-[var(--grn)]' : (oi===q.answered ? 'border-[var(--red)] bg-[rgba(239,68,68,.1)] text-[var(--red)]' : 'opacity-50')) : 'hover:border-p4 hover:tx-p4 hover:bg-[var(--bd2)]'"
                     class="flex items-center gap-2.5 px-3.5 py-2.5 rounded-xl bg-sf border bd2 cursor-pointer tx2 text-[13.5px] t-btn">
                  <span class="w-6 h-6 rounded-full bg-[var(--bd)] grid place-items-center text-xs font-bold flex-shrink-0" x-text="'ABCD'[oi]"></span>
                  <span x-text="opt"></span>
                </div>
              </template>
            </div>
          </div>
        </template>
      </div>
      <div x-show="ptMode==='ai'">
        <div class="bg-sf2 border bd2 rounded-2xl p-5 t-theme">
          <div class="text-[13px] font-semibold tx mb-2.5">‚ú® AI Practice Test Generator</div>
          <textarea x-model="testTopic" class="w-full bg-sf border bd rounded-xl px-4 py-3 font-sans text-sm tx resize-y outline-none min-h-[80px] focus:border-p4 t-btn placeholder:tx3" placeholder="Enter a topic (e.g. 'Algebra ‚Äî quadratic equations')..."></textarea>
          <div class="flex gap-2.5 mt-2.5 items-center flex-wrap">
            <select x-model="testCount" class="bg-sf border bd rounded-xl px-3.5 py-2 font-sans text-[13px] tx outline-none cursor-pointer">
              <option value="3">3 questions</option><option value="5" selected>5 questions</option><option value="8">8 questions</option><option value="10">10 questions</option>
            </select>
            <select x-model="testDiff" class="bg-sf border bd rounded-xl px-3.5 py-2 font-sans text-[13px] tx outline-none cursor-pointer">
              <option value="easy">Easy</option><option value="mixed" selected>Mixed</option><option value="hard">Hard</option>
            </select>
            <button @click="genTest()" :disabled="loadingPT" class="text-[13px] font-semibold px-5 py-2 rounded-full border-none text-white grad-bg cursor-pointer shadow-glow t-btn disabled:opacity-50">
              <span x-text="loadingPT ? 'Generating‚Ä¶' : 'Generate Test'"></span>
            </button>
            <span class="text-[13px] tx3" x-text="ptStatus"></span>
          </div>
        </div>
        <!-- FIX #22 FRAMEWORK: Alpine x-for renders AI-generated questions reactively -->
        <template x-for="(q,qi) in aiQuestions" :key="qi">
          <div class="bg-sf2 border bd2 rounded-2xl p-4.5 mt-3">
            <div class="text-sm font-semibold tx mb-3" x-text="(qi+1)+'. '+q.q"></div>
            <div class="flex flex-col gap-2">
              <template x-for="(opt,oi) in q.opts" :key="oi">
                <div @click="answerAI(q,oi)"
                     :class="q.answered!=null ? (oi===q.correct ? 'border-[var(--grn)] bg-[rgba(34,197,94,.1)] text-[var(--grn)]' : (oi===q.answered ? 'border-[var(--red)] bg-[rgba(239,68,68,.1)] text-[var(--red)]' : 'opacity-50')) : 'hover:border-p4 hover:tx-p4 hover:bg-[var(--bd2)]'"
                     class="flex items-center gap-2.5 px-3.5 py-2.5 rounded-xl bg-sf border bd2 cursor-pointer tx2 text-[13.5px] t-btn">
                  <span class="w-6 h-6 rounded-full bg-[var(--bd)] grid place-items-center text-xs font-bold flex-shrink-0" x-text="'ABCD'[oi]"></span>
                  <span x-text="opt"></span>
                </div>
              </template>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ -->
<section id="chat" class="flex flex-col items-center py-24 px-5 md:px-[clamp(20px,6vw,80px)] bg-base2 t-theme" x-data="chatWidget()">
  <div class="inline-flex items-center gap-2 bg-sf2 border bd px-4 py-1.5 rounded-full text-[11px] font-bold tracking-[2.5px] uppercase tx-p4 mb-5 reveal t-theme"><span class="dot w-1.5 h-1.5 rounded-full bg-p4"></span>Live Demo</div>
  <h2 class="font-display text-[clamp(2rem,5vw,3.6rem)] font-bold text-center tx leading-tight mb-3.5 reveal">Chat with Korah AI ‚Äî Right Now</h2>
  <p class="text-base leading-relaxed tx2 text-center max-w-lg mx-auto mb-9 reveal">No sign-up needed. Ask anything, request a quiz, or get help planning your study day.</p>
  <div class="w-full max-w-[720px] mx-auto reveal">
    <div class="bg-card border bd rounded-3xl overflow-hidden shadow-card t-theme">
      <div class="px-6 py-4.5 border-b bd2 flex items-center gap-3 bg-sf2 t-theme">
        <div class="w-10 h-10 rounded-xl grad-bg grid place-items-center text-lg shadow-glow">K</div>
        <div>
          <div class="font-bold tx text-[15px]">Korah AI</div>
          <div class="text-xs text-[var(--grn)] flex items-center gap-1.5 before:content-[''] before:w-1.5 before:h-1.5 before:rounded-full before:bg-[var(--grn)] before:inline-block">Online ‚Äî Ready to help you study</div>
        </div>
      </div>
      <div class="chat-body px-6 py-6 h-[380px] overflow-y-auto flex flex-col gap-3.5" x-ref="chatBody">
        <template x-for="(msg,i) in messages" :key="i">
          <div :class="msg.role==='user' ? 'self-end max-w-[80%] bg-[var(--cu)] border bd rounded-[18px_18px_4px_18px]' : 'self-start max-w-[80%] bg-[var(--ca)] border bd rounded-[18px_18px_18px_4px]'"
               class="px-4 py-3 text-sm leading-relaxed tx">
            <template x-if="msg.role==='ai'">
              <div class="flex items-center gap-1.5 text-[11px] font-bold tracking-[1px] tx-p4 uppercase mb-1.5">
                <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-pulse-dot"></span>Korah AI
              </div>
            </template>
            <span x-html="msg.html || msg.text"></span>
            <template x-if="msg.typing">
              <div class="flex gap-1 items-center mt-1">
                <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce"></span>
                <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce" style="animation-delay:.2s"></span>
                <span class="w-1.5 h-1.5 rounded-full bg-p4 animate-tbounce" style="animation-delay:.4s"></span>
              </div>
            </template>
          </div>
        </template>
      </div>
      <div class="px-5 py-4 border-t bd2 flex gap-2.5 items-end bg-sf2 t-theme">
        <textarea x-model="input" @keydown.enter.prevent="!$event.shiftKey && send()" @input="$el.style.height='auto';$el.style.height=$el.scrollHeight+'px'" class="flex-1 bg-sf border bd rounded-xl px-4 py-3 font-sans text-sm tx resize-none outline-none min-h-[44px] max-h-[100px] focus:border-p4 t-btn placeholder:tx3" placeholder="Ask anything ‚Äî 'Explain osmosis', 'Quiz me on WW2'..." rows="1"></textarea>
        <button @click="send()" class="w-11 h-11 rounded-xl grad-bg border-none cursor-pointer grid place-items-center text-lg shadow-glow t-btn hover:scale-[1.08]">‚û§</button>
      </div>
    </div>
    <div class="flex flex-wrap gap-2 mt-4">
      <button x-for="s in suggestions" :key="s.msg" @click="sendMsg(s.msg)" class="bg-sf2 border bd tx2 text-[13px] font-medium px-4 py-2 rounded-full cursor-pointer font-sans t-btn hover:bg-[var(--bd)] hover:border-p4 hover:tx-p5 hover:-translate-y-0.5" x-text="s.label"></button>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ DOWNLOAD ‚îÄ‚îÄ -->
<section id="download" class="flex flex-col items-center py-24 px-5 md:px-[clamp(20px,6vw,80px)] bg-base3 t-theme relative overflow-hidden">
  <div class="absolute -top-1/2 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full pointer-events-none" style="background:radial-gradient(circle,var(--glow),transparent 70%)"></div>
  <div class="inline-flex items-center gap-2 bg-sf2 border bd px-4 py-1.5 rounded-full text-[11px] font-bold tracking-[2.5px] uppercase tx-p4 mb-5 reveal t-theme relative z-10"><span class="dot w-1.5 h-1.5 rounded-full bg-p4"></span>Get the App</div>
  <h2 class="font-display text-[clamp(2rem,5vw,3.6rem)] font-bold text-center tx leading-tight mb-3.5 reveal relative z-10">Download Korah Beta</h2>
  <p class="text-base leading-relaxed tx2 text-center max-w-lg mx-auto mb-9 reveal relative z-10">Free during beta. Available on all platforms.</p>
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-5 w-full max-w-[860px] mt-4 relative z-10">
    <template x-for="(p,i) in platforms" :key="p.name">
      <div class="tilt-card bg-card border bd rounded-3xl p-8 text-center t-hover t-theme reveal" :class="'rd'+(i+1)">
        <span class="text-5xl mb-4 block" x-text="p.icon"></span>
        <div class="inline-block text-[10px] font-bold tracking-[1.5px] uppercase bg-sf2 border bd tx-p5 px-3 py-1 rounded-full mb-3.5">Beta ¬∑ v0.9.1</div>
        <h3 class="text-lg font-bold mb-2 tx" x-text="p.name"></h3>
        <p class="text-[13.5px] tx2 mb-5 leading-relaxed" x-text="p.desc"></p>
        <!-- FIX #22 FRAMEWORK: Alpine manages button state without separate JS -->
        <button @click="p.joined=true" :disabled="p.joined" class="w-full text-base font-bold py-3.5 rounded-full border-none text-white grad-bg cursor-pointer shadow-glow t-btn hover:-translate-y-0.5 disabled:cursor-default"
                :x-text="p.joined ? '‚úÖ You\'re on the list!' : 'Download for '+p.name">
          <span x-text="p.joined ? '‚úÖ You\'re on the list!' : 'Download for '+p.name"></span>
        </button>
      </div>
    </template>
  </div>
  <div class="mt-8 text-center text-sm tx2 reveal relative z-10">
    Or use Korah instantly in your browser ‚Äî no download needed üåê<br/>
    <a href="#chat" class="tx-p4 no-underline font-semibold hover:underline">Try the web app ‚Üí</a>
  </div>
</section>

</div><!-- /page -->

<footer class="relative z-10 bg-base border-t bd px-[clamp(20px,6vw,80px)] pt-[60px] pb-10 t-theme">
  <div class="max-w-[1100px] mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-[2fr_1fr_1fr_1fr] gap-12">
    <div>
      <div class="flex items-center gap-2.5">
        <div class="w-9 h-9 rounded-xl grad-bg flex items-center justify-center font-display text-base font-black text-white shadow-glow">K</div>
        <div class="flex flex-col leading-tight"><span class="font-display text-base font-bold tx">Korah</span><span class="text-[9px] font-semibold tracking-[2.5px] uppercase tx-p4">AI Study Companion</span></div>
      </div>
      <p class="text-sm tx2 leading-[1.7] max-w-[280px] mt-3.5">Korah helps students study smarter with mood-aware recommendations, smart task management, focus sessions, and AI-powered study tools.</p>
    </div>
    <div><h4 class="text-xs font-bold tracking-[2px] uppercase tx-p5 mb-4">Product</h4><a href="#features" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Features</a><a href="#how" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">How it Works</a><a href="#study-tools" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Study Tools</a><a href="#download" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Download</a></div>
    <div><h4 class="text-xs font-bold tracking-[2px] uppercase tx-p5 mb-4">Support</h4><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Help Center</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Contact Us</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Bug Report</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Status</a></div>
    <div><h4 class="text-xs font-bold tracking-[2px] uppercase tx-p5 mb-4">Company</h4><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">About Korah</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Blog</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Privacy Policy</a><a href="#" class="block text-sm tx2 no-underline py-1 t-btn hover:tx-p4">Terms</a></div>
  </div>
  <div class="max-w-[1100px] mx-auto mt-10 pt-6 border-t bd2 flex flex-wrap items-center justify-between gap-3 text-[12.5px] tx3">
    <span>¬© 2025 Korah Technologies. All rights reserved.</span>
    <span>Made for students, by students üìö</span>
    <span>Beta v0.9.1</span>
  </div>
</footer>

<script>
'use strict';
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FIX #19 MAINT: Single shared Anthropic fetch helper
   FIX #20 MEM:   convHistory capped at 20 messages
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SYSTEM = `You are Korah, a friendly AI study assistant. Be warm, encouraging, adapt to student mood.
When tired/burnt out: suggest a color üü¢üü°üî¥ and recommend tasks. Use simple language and analogies.
For quizzes: numbered questions with A/B/C/D. Keep ~150 words. Use emojis naturally.`;

async function korahAPI(systemMsg, messages, maxTokens = 1000) {
  const r = await fetch('https://api.anthropic.com/v1/messages', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: maxTokens, system: systemMsg, messages })
  });
  const d = await r.json();
  return d.content?.map(b => b.text || '').join('') || '';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FIX #22 FRAMEWORK: Alpine.js app() ‚Äî replaces all manual DOM/state JS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function app() {
  return {
    theme: 'dark',
    menuOpen: false,
    currentSection: 'home',
    /* FIX #17: removed dead scrollTo function */
    navLinks: [
      { id: 'home', label: 'Home' }, { id: 'how', label: 'How it Works' },
      { id: 'features', label: 'Features' }, { id: 'study-tools', label: 'Study Tools' },
      { id: 'chat', label: 'Korah AI' }, { id: 'download', label: 'Download' }
    ],
    platforms: [
      { name: 'iOS', icon: 'üçé', desc: 'iOS 16+ required. Optimized for all screen sizes.', joined: false },
      { name: 'Android', icon: 'ü§ñ', desc: 'Android 11+. Works great on phones and tablets.', joined: false },
      { name: 'Desktop', icon: 'üíª', desc: 'Mac, Windows & Linux. Full features with document upload.', joined: false }
    ],
    /* Intro auto-plays ‚Äì no user interaction needed */
    startIntro() {
      playIntro();
    },
    init() {
      /* FIX #1 PERF: single IntersectionObserver for nav, reveal, progress bars, AND mascot */
      setTimeout(playIntro, 200); // start cinematic intro

      /* Hero chat animation */
      setTimeout(() => {
        const stream = document.getElementById('heroChatStream');
        const typing = document.getElementById('hero-typing');
        if (!typing) return;
        const reply = document.createElement('div');
        reply.className = 'self-start max-w-[80%] px-4 py-3 rounded-[18px_18px_18px_4px] text-sm leading-relaxed bg-[var(--ca)] border tx';
        reply.style.borderColor = 'var(--bd)';
        reply.innerHTML = '<div class="flex items-center gap-1.5 text-[11px] font-bold tracking-[1px] tx-p4 uppercase mb-1.5"><span class="w-1.5 h-1.5 rounded-full bg-p4 animate-pulse-dot"></span>Korah AI</div>Here\'s your study guide for <strong>Photosynthesis</strong>! üåø<br/><br/><strong>Key equation:</strong> 6CO‚ÇÇ + 6H‚ÇÇO + light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ<br/><strong>Location:</strong> Chloroplasts<br/><strong>Two stages:</strong> Light reactions ‚Üí Calvin Cycle<br/><br/>Want flashcards or a quick quiz on this?';
        setTimeout(() => { typing.replaceWith(reply); stream.scrollTop = stream.scrollHeight; }, 2500);
      }, 1000);

      /* FIX #1 PERF: ONE IntersectionObserver handles reveal, progress bars, active nav, and mascot */
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => {
          /* Scroll reveal */
          if (e.target.classList.contains('reveal') && e.isIntersecting) e.target.classList.add('visible');
          /* Progress bars */
          if (e.isIntersecting) e.target.querySelectorAll('[data-target]').forEach(b => setTimeout(() => b.style.width = b.dataset.target + '%', 200));
          /* Active nav + mascot */
          if (e.isIntersecting && e.target.tagName === 'SECTION') {
            const id = e.target.id;
            document.querySelectorAll('.nav-link').forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + id));
            if (id !== this.currentSection) {
              this.currentSection = id;
            }
          }
        });
      }, { threshold: 0.15 });

      document.querySelectorAll('.reveal, section[id], .bc, .tool-card').forEach(el => io.observe(el));

      /* Streak row */
      const row = document.getElementById('streakRow');
      if (row) [1,1,1,1,1,0,0].forEach((d,i) => {
        const c = document.createElement('div');
        c.className = 'w-6 h-6 rounded-md ' + (d ? (i===4 ? 'bg-[var(--gold)] shadow-[0_0_10px_rgba(251,191,36,.4)]' : 'bg-gradient-to-br from-p3 to-p4') : 'bg-[var(--bd)]');
        row.appendChild(c);
      });

      /* FIX #15 PERF: event delegation for card tilt ‚Äî ONE listener on document */
      document.addEventListener('mousemove', e => {
        const card = e.target.closest('.tilt-card');
        if (!card) return;
        const r = card.getBoundingClientRect(), x = (e.clientX - r.left) / r.width - .5, y = (e.clientY - r.top) / r.height - .5;
        card.style.transform = `perspective(700px) rotateX(${-y*7}deg) rotateY(${x*7}deg) translateY(-5px)`;
        card.style.setProperty('--mx', (x+.5)*100+'%');
        card.style.setProperty('--my', (y+.5)*100+'%');
      }, { passive: true });

      document.addEventListener('mouseleave', e => {
        const card = e.target.closest('.tilt-card');
        if (card) card.style.transform = '';
      }, { passive: true, capture: true });

      /* FIX #21 PERF: passive scroll listener */
      window.addEventListener('scroll', () => {
        document.getElementById('navbar').classList.toggle('scrolled', scrollY > 10);
      }, { passive: true });

      /* Three.js ‚Äî only runs after defer load */
      window.addEventListener('DOMContentLoaded', initThreeJS);
      if (document.readyState === 'complete') initThreeJS();
    }
  };
}

/* ‚îÄ‚îÄ Three.js 3D background ‚îÄ‚îÄ FIX #8: called after defer load ‚îÄ‚îÄ */
function initThreeJS() {
  if (!window.THREE) { setTimeout(initThreeJS, 200); return; }
  const canvas = document.getElementById('bg-canvas');
  const R = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
  R.setPixelRatio(Math.min(devicePixelRatio, 2));
  R.setSize(innerWidth, innerHeight);
  const scene = new THREE.Scene(), cam = new THREE.PerspectiveCamera(70, innerWidth/innerHeight, .1, 200);
  cam.position.z = 30;
  window.addEventListener('resize', () => { cam.aspect = innerWidth/innerHeight; cam.updateProjectionMatrix(); R.setSize(innerWidth, innerHeight); });
  scene.add(new THREE.AmbientLight(0x2d1060, 3));
  const pl = new THREE.PointLight(0x8b5cf6, 5, 80); pl.position.set(0,5,15); scene.add(pl);
  scene.add(Object.assign(new THREE.PointLight(0x5b21b6, 3, 60), { position: { x:-20, y:-10, z:5 } }));
  const shapes = [], bm = new THREE.MeshPhongMaterial({ color:0x5b21b6, emissive:0x1a0545, transparent:true, opacity:.45 });
  const wm = new THREE.MeshBasicMaterial({ color:0x8b5cf6, transparent:true, opacity:.1, wireframe:true });
  for (let i=0; i<18; i++) {
    const s = .3+Math.random()*1.2;
    const g = [new THREE.IcosahedronGeometry(s,0), new THREE.OctahedronGeometry(s,0), new THREE.TetrahedronGeometry(s,0), new THREE.BoxGeometry(s,s,s)][i%4];
    const m = new THREE.Mesh(g, (i%3===2?wm:bm).clone());
    m.position.set((Math.random()-.5)*60, (Math.random()-.5)*45, (Math.random()-.5)*20-8);
    m.userData = { rx:(.5-Math.random())*.007, ry:(.5-Math.random())*.007, oy:m.position.y, ph:Math.random()*Math.PI*2, sp:.3+Math.random()*.5 };
    scene.add(m); shapes.push(m);
  }
  const pGeo = new THREE.BufferGeometry(), pArr = new Float32Array(700*3);
  for (let i=0; i<700*3; i++) pArr[i] = (Math.random()-.5)*100;
  pGeo.setAttribute('position', new THREE.BufferAttribute(pArr, 3));
  scene.add(new THREE.Points(pGeo, new THREE.PointsMaterial({ color:0xa78bfa, size:.1, transparent:true, opacity:.35 })));
  let mx=0, my=0, t=0;
  /* FIX #21 PERF: passive mousemove */
  document.addEventListener('mousemove', e => { mx = e.clientX/innerWidth-.5; my = e.clientY/innerHeight-.5; }, { passive:true });
  (function tick() {
    requestAnimationFrame(tick); t+=.006;
    cam.position.x += (mx*4-cam.position.x)*.03;
    cam.position.y += (-my*3-cam.position.y)*.03;
    cam.lookAt(0,0,0);
    shapes.forEach(s => { s.rotation.x += s.userData.rx; s.rotation.y += s.userData.ry; s.position.y = s.userData.oy + Math.sin(t*s.userData.sp+s.userData.ph)*1.5; });
    pl.position.x = Math.sin(t*.4)*10; pl.position.y = Math.cos(t*.3)*6;
    R.render(scene, cam);
  })();
}

/* ‚îÄ‚îÄ FIX #22 FRAMEWORK: Alpine components for interactive widgets ‚îÄ‚îÄ */

function moodWidget() {
  return {
    active: 'gm',
    get moodMsg() {
      return { gm:"‚úÖ You're in the zone! Korah recommends your 2 hard tasks today.", ym:"üü° Moderate energy. Korah suggests 1 medium task and a 25-min focus session.", rm:"üî¥ Low energy today ‚Äî Korah picked your 1 easy task. Rest is studying too." }[this.active];
    },
    get moodColor() { return { gm:'var(--mg)', ym:'var(--my)', rm:'var(--mr)' }[this.active]; },
    select(v) { this.active = v; }
  };
}

function timer() {
  return {
    curMin: 25, sec: 25*60, running: false, tick: null,
    get display() { return String(Math.floor(this.sec/60)).padStart(2,'0')+':'+String(this.sec%60).padStart(2,'0'); },
    setMin(m) {
      if (this.running) { clearInterval(this.tick); this.running = false; }
      this.curMin = m; this.sec = m*60;
    },
    toggle() {
      if (this.running) { clearInterval(this.tick); this.running = false; }
      else { this.running = true; this.tick = setInterval(() => { this.sec--; if (this.sec<=0) { clearInterval(this.tick); this.running = false; this.sec = 0; } }, 1000); }
    },
    reset() { clearInterval(this.tick); this.running = false; this.sec = this.curMin*60; }
  };
}

function studyTools() {
  return {
    activeTab: 'flashcards',
    tabs: [{ id:'flashcards', label:'üÉè Flashcards' }, { id:'studyguide', label:'üìñ Study Guide' }, { id:'practicetest', label:'‚úèÔ∏è Practice Test' }],
    /* Flashcards */
    fcMode: 'manual', flashTopic: '', flashCount: '4', loadingFC: false, fcStatus: '',
    sampleCards: [
      { q:'What is photosynthesis?', a:'Converting sunlight, CO‚ÇÇ and water into glucose and oxygen.', flipped:false },
      { q:'Where does it occur?', a:'In the <strong>chloroplasts</strong>, in thylakoid membranes and stroma.', flipped:false },
      { q:'What is the light-dependent reaction?', a:'Uses light to produce ATP, NADPH and O‚ÇÇ from water ‚Äî in the thylakoids.', flipped:false },
      { q:'What is the Calvin Cycle?', a:'Light-independent reactions in the stroma where CO‚ÇÇ produces G3P ‚Üí glucose.', flipped:false },
    ],
    async genFlashcards() {
      if (!this.flashTopic.trim()) { this.fcStatus = '‚ö†Ô∏è Enter a topic first.'; return; }
      this.loadingFC = true; this.fcStatus = '';
      try {
        let raw = await korahAPI(`Generate exactly ${this.flashCount} flashcard Q&A pairs. Return ONLY JSON array: [{"q":"...","a":"..."}]. No markdown.`, [{ role:'user', content:this.flashTopic }]);
        raw = raw.replace(/```json|```/g, '').trim();
        const cards = JSON.parse(raw);
        this.sampleCards = cards.map(c => ({ q:c.q, a:c.a, flipped:false }));
        this.fcStatus = `‚úÖ ${cards.length} cards generated!`;
        this.fcMode = 'manual';
      } catch { this.fcStatus = 'Error. Try again.'; }
      this.loadingFC = false;
    },
    /* Study Guide */
    sgMode: 'manual', guideTopic: '', guideDepth: 'detailed', loadingSG: false, sgStatus: '', guideHTML: '',
    async genGuide() {
      if (!this.guideTopic.trim()) { this.sgStatus = '‚ö†Ô∏è Enter a topic first.'; return; }
      this.loadingSG = true; this.sgStatus = ''; this.guideHTML = '';
      try {
        const html = await korahAPI(`Create a ${this.guideDepth} study guide. Use <h4> headers, <p>, <ul><li>. Include Key Takeaways and Common Mistakes. No code blocks.`, [{ role:'user', content:'Study guide for: '+this.guideTopic }]);
        this.guideHTML = html.replace(/###\s*/g,'').replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>');
        this.sgStatus = '‚úÖ Generated!';
      } catch { this.sgStatus = 'Error. Try again.'; }
      this.loadingSG = false;
    },
    /* Practice Test */
    ptMode: 'sample', testTopic: '', testCount: '5', testDiff: 'mixed', loadingPT: false, ptStatus: '', aiQuestions: [],
    sampleTest: [
      { q:'What is the primary product of photosynthesis?', opts:['Oxygen','Glucose','Carbon Dioxide','Water'], c:1, answered:null },
      { q:'In which organelle does photosynthesis take place?', opts:['Mitochondria','Nucleus','Chloroplast','Ribosome'], c:2, answered:null },
      { q:'What gas is released as a byproduct?', opts:['Nitrogen','Hydrogen','Carbon Dioxide','Oxygen'], c:3, answered:null },
      { q:'Which stage occurs in the stroma?', opts:['Light reactions','Calvin Cycle','Glycolysis','Krebs Cycle'], c:1, answered:null },
    ],
    answerQ(q, oi) { if (q.answered == null) q.answered = oi; },
    answerAI(q, oi) { if (q.answered == null) q.answered = oi; },
    async genTest() {
      if (!this.testTopic.trim()) { this.ptStatus = '‚ö†Ô∏è Enter a topic first.'; return; }
      this.loadingPT = true; this.ptStatus = ''; this.aiQuestions = [];
      try {
        let raw = await korahAPI(`Generate exactly ${this.testCount} MCQ at ${this.testDiff} difficulty. Return ONLY JSON: [{"q":"...","opts":["A","B","C","D"],"correct":0}]. No markdown.`, [{ role:'user', content:this.testTopic }], 1500);
        raw = raw.replace(/```json|```/g, '').trim();
        this.aiQuestions = JSON.parse(raw).map(q => ({ ...q, answered:null }));
        this.ptStatus = `‚úÖ ${this.aiQuestions.length} questions!`;
        this.ptMode = 'ai';
      } catch { this.ptStatus = 'Error. Try again.'; }
      this.loadingPT = false;
    }
  };
}

function chatWidget() {
  return {
    input: '',
    /* FIX #20 MEM: history capped at 20 messages */
    history: [],
    messages: [{ role:'ai', text:'', html:"Hey! üëã I'm Korah. Ask me anything ‚Äî explain concepts, quiz you, or plan your study day. What are we working on today?" }],
    suggestions: [
      { label:"üò¥ I'm tired today", msg:"I'm really tired today. What should I study?" },
      { label:"‚ö° Newton's Laws", msg:"Explain Newton's three laws of motion simply" },
      { label:"üß† WW2 Quiz", msg:"Quiz me on World War 2 ‚Äî 5 questions" },
      { label:"üìê Quadratics", msg:"Help me understand quadratic equations step by step" },
      { label:"üÜò Test Tomorrow", msg:"I have a test tomorrow and haven't studied. What's the most efficient plan?" }
    ],
    async send() {
      const msg = this.input.trim(); if (!msg) return;
      this.messages.push({ role:'user', text:msg }); this.input = '';
      this.history.push({ role:'user', content:msg });
      if (this.history.length > 20) this.history.splice(0, 2);
      this.$nextTick(() => { if(this.$refs.chatBody) this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight; });
      const typing = { role:'ai', text:'', typing:true };
      this.messages.push(typing);
      try {
        const reply = await korahAPI(SYSTEM, [...this.history]);
        this.history.push({ role:'assistant', content:reply });
        if (this.history.length > 20) this.history.splice(0, 2);
        const idx = this.messages.indexOf(typing);
        if (idx > -1) this.messages.splice(idx, 1, { role:'ai', text:'', html: reply.replace(/\n/g,'<br/>') });
      } catch {
        const idx = this.messages.indexOf(typing);
        if (idx > -1) this.messages.splice(idx, 1, { role:'ai', text:'Connection issue ‚Äî try again! üîå' });
      }
      this.$nextTick(() => { if(this.$refs.chatBody) this.$refs.chatBody.scrollTop = this.$refs.chatBody.scrollHeight; });
    },
    sendMsg(msg) { this.input = msg; this.send(); }
  };
}

/* ‚ïê‚ïê‚ïê‚ïê CINEMATIC INTRO ANIMATION ‚ïê‚ïê‚ïê‚ïê */
function playIntro() {
  const overlay = document.getElementById('intro-overlay');
  const orb     = document.getElementById('intro-orb');
  const mascot  = document.getElementById('intro-mascot');
  const wordmark = document.getElementById('intro-wordmark');
  const canvas  = document.getElementById('intro-canvas');
  if (!overlay) return;

  // Particle canvas
  const ctx = canvas.getContext('2d');
  canvas.width = innerWidth; canvas.height = innerHeight;
  const particles = Array.from({length:120}, () => ({
    x: Math.random() * innerWidth, y: Math.random() * innerHeight,
    r: .5 + Math.random() * 1.8,
    vx: (Math.random()-.5)*.4, vy: (Math.random()-.5)*.4 - .3,
    life: Math.random(), speed: .003 + Math.random()*.004,
    color: `hsla(${260+Math.random()*40},80%,${60+Math.random()*20}%,`
  }));
  let animId;
  function drawParticles() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p => {
      p.life += p.speed; if(p.life>1) p.life=0;
      const a = Math.sin(p.life*Math.PI);
      ctx.beginPath(); ctx.arc(p.x + Math.cos(p.life*6)*8, p.y + p.vy*p.life*120, p.r, 0, Math.PI*2);
      ctx.fillStyle = p.color + a.toFixed(2) + ')'; ctx.fill();
    });
    animId = requestAnimationFrame(drawParticles);
  }
  drawParticles();

  // Timeline
  // t=0: orb blooms
  setTimeout(() => { orb.style.transform = 'scale(1)'; }, 100);
  // t=600: mascot rises in
  setTimeout(() => {
    mascot.style.opacity = '1';
    mascot.style.transform = 'translateY(0) scale(1)';
  }, 600);
  // t=1200: wordmark fades up
  setTimeout(() => {
    wordmark.style.opacity = '1';
    wordmark.style.transform = 'translateY(0)';
  }, 1200);
  // t=2400: hold, then sweep page in
  setTimeout(() => {
    cancelAnimationFrame(animId);
    // Mascot flies up and shrinks toward the nav K logo
    mascot.style.transition = 'opacity .6s .1s, transform .8s cubic-bezier(.77,0,.18,1)';
    mascot.style.transform = 'translateY(-44vh) scale(.12)';
    mascot.style.opacity = '0';
    orb.style.transition = 'opacity .5s';
    orb.style.opacity = '0';
    // Canvas particles fade out
    canvas.style.transition = 'opacity .5s .2s';
    canvas.style.opacity = '0';
    // Wordmark fades
    wordmark.style.transition = 'opacity .4s';
    wordmark.style.opacity = '0';
    // Overlay fades away ‚Äî page was always visible beneath
    overlay.style.transition = 'opacity .4s .5s';
    overlay.style.opacity = '0';
  }, 2600);
  setTimeout(() => {
    overlay.style.display = 'none';
    overlay.classList.add('done');
  }, 3200);
}

</script>
</body>
</html>
